"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[463],{844:(e,t,r)=>{r.r(t),r.d(t,{default:()=>w});var n=r(8081),o=r(2149),s=r(9403),a=r.n(s);r(7566),r(4460),r(4149),r(7286);var i=r(1011),l=r(2184),c=r(4666),d=r(4096),u=r(6427),p=r(7316),m=r(6079),x=r(1413),f=r(8022),b=r(5024);let g={"plaats/settlement":"#1f77b4","eiland/island":"#ff7f0e","rivier/river":"#2ca02c","kaap/cape":"#9467bd","landstreek/region":"#7f7f7f","baai/bay":"#8c564b","eilanden/islands":"#ff8c42","fort/fortress":"#aec7e8","berg/mountain":"#d62728","ondiepte/shoals":"#98df8a","zeestraat/strait":"#17becf","provincie/province":"#c5b0d5","rif/reef":"#ffbb78","wijk/town district":"#bcbd22","klip/cliff":"#8c564b","schiereiland/peninsula":"#e377c2","gebouw/building":"#ff9896","inham/inlet":"#17becf","lagune/lagoon":"#98df8a","meer/lake":"#e377c2","zee/sea":"#17becf","fort/fortification":"#aec7e8","weg/road":"#ffbb78","bron/spring, well":"#98df8a","klooster/monastery":"#ff9896","ru\xefne/ruin":"#c5b0d5",unknown:"#bcbd22"},h={osm:{name:"OpenStreetMap",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'},satellite:{name:"Satellite",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:'&copy; <a href="https://www.esri.com/">Esri</a>'},terrain:{name:"Terrain",url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://opentopomap.org/">OpenTopoMap</a>'}},v="#333333",y=(e,t)=>{let r=t?18:14,n=[r/2,r/2];return a().divIcon({html:'<span style="background-color: '.concat(e,"; width: ").concat(r,"px; height: ").concat(r,"px; border-radius: 50%; display: inline-block; border: ").concat(t?"3px solid #d97706":"2px solid #fef3c7","; box-shadow: ").concat(t?"0 0 12px rgba(217, 119, 6, 0.4), 0 2px 8px rgba(101, 79, 60, 0.3)":"0 2px 6px rgba(101, 79, 60, 0.2), 0 1px 3px rgba(101, 79, 60, 0.1)",'; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); transform: scale(1);"></span>'),className:"custom-div-icon ".concat(t?"selected-marker-icon":""),iconSize:[r,r],iconAnchor:n})};delete a().Icon.Default.prototype._getIconUrl,a().Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});let w=o.memo(e=>{let{points:t,selectedPointId:r,onPointSelect:s}=e,w=(0,o.useRef)(null),k=(0,o.useRef)(null),j=(0,o.useRef)(null),N=(0,o.useRef)(null),[C,z]=(0,o.useState)(!1),[S,L]=(0,o.useState)(!0),[A,E]=(0,o.useState)(!0),[O,I]=(0,o.useState)("osm"),[P,T]=(0,o.useState)(!0),[M,B]=(0,o.useState)({totalPoints:0,visiblePoints:0,categories:0}),D=(0,o.useRef)({}),[V,R]=(0,o.useState)({}),U=(0,o.useCallback)(()=>{k.current&&k.current.zoomIn()},[]),Z=(0,o.useCallback)(()=>{k.current&&k.current.zoomOut()},[]),F=(0,o.useCallback)(()=>{if(k.current&&j.current)try{let e=j.current.getBounds();e.isValid()?k.current.fitBounds(e,{padding:[20,20],maxZoom:16}):k.current.setView([20,0],2)}catch(e){k.current.setView([20,0],2)}},[]),_=(0,o.useCallback)(e=>{if(k.current&&h[e]){let t=h[e];k.current.eachLayer(e=>{if(e instanceof a().TileLayer){var t;null===(t=k.current)||void 0===t||t.removeLayer(e)}}),a().tileLayer(t.url,{attribution:t.attribution}).addTo(k.current),I(e)}},[]),H=(0,o.useCallback)(()=>{if(k.current&&j.current){let e=Object.values(D.current);P?(j.current.clearLayers(),e.forEach(e=>{var t;return null===(t=k.current)||void 0===t?void 0:t.addLayer(e)})):(e.forEach(e=>{var t;return null===(t=k.current)||void 0===t?void 0:t.removeLayer(e)}),j.current.addLayers(e)),T(!P)}},[P]);(0,o.useEffect)(()=>{let e=t.length;B({totalPoints:e,visiblePoints:Object.keys(D.current).length,categories:Object.keys(V).length})},[t,V]);let W=(0,o.useMemo)(()=>{if(!t||0===t.length)return{};let e=Array.from(new Set(t.map(e=>e.category&&e.category.trim()?e.category:""))).filter(Boolean).sort(),r={},n=new Set;e.forEach(e=>{let t=g[e.toLowerCase()];t&&!n.has(t)&&(r[e]={color:t},n.add(t))});let o=0;return e.forEach(e=>{if(!r[e]){let t,s=0;do{let e=(137.508*o+15*s)%360;t="hsl(".concat(Math.floor(e),", 70%, 50%)"),s++}while(n.has(t)&&s<25);n.has(t)&&(t="hsl(".concat(Math.floor(360*Math.random()),", 70%, 60%)")),r[e]={color:t},n.add(t),o++}}),r},[t]);return(0,o.useEffect)(()=>{R(W)},[W]),(0,o.useEffect)(()=>{if(!w.current||k.current)return;E(!0),k.current=a().map(w.current,{center:[20,0],zoom:2,attributionControl:!1,zoomControl:!1}),a().control.attribution({prefix:'<a href="https://leafletjs.com">Leaflet</a>',position:"bottomleft"}).addTo(k.current);let e=h[O];return a().tileLayer(e.url,{attribution:e.attribution}).addTo(k.current),j.current=a().markerClusterGroup({chunkedLoading:!0,maxClusterRadius:50,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,spiderfyOnMaxZoom:!0,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!0,disableClusteringAtZoom:18,iconCreateFunction:function(e){let t=e.getChildCount(),r="small",n="marker-cluster-small";t<10?(r="small",n="marker-cluster-small"):t<100?(r="medium",n="marker-cluster-medium"):(r="large",n="marker-cluster-large");let o="small"===r?40:"medium"===r?50:60,s="small"===r?"12px":"medium"===r?"14px":"16px";return new(a()).DivIcon({html:'<div style="\n            background: linear-gradient(135deg, #ffffff 0%, #f1f5f9 50%, #e2e8f0 100%);\n            border: 3px solid #475569;\n            border-radius: 50%;\n            width: '.concat(o,"px;\n            height: ").concat(o,"px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-weight: 700;\n            font-size: ").concat(s,';\n            color: #1e293b;\n            box-shadow: 0 6px 20px rgba(71, 85, 105, 0.15), 0 3px 10px rgba(71, 85, 105, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.5);\n            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n            font-family: \'Inter\', system-ui, sans-serif;\n            position: relative;\n          " class="cartographic-cluster">\n            <div style="\n              position: absolute;\n              inset: 3px;\n              background: linear-gradient(135deg, rgba(255, 255, 255, 0.3) 0%, rgba(255, 255, 255, 0.05) 100%);\n              border-radius: 50%;\n              pointer-events: none;\n            "></div>\n            <span style="position: relative; z-index: 1; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);">').concat(t,"</span>\n          </div>"),className:"marker-cluster ".concat(n),iconSize:new(a()).Point(o,o),iconAnchor:[o/2,o/2]})}}),k.current.addLayer(j.current),setTimeout(()=>{E(!1),z(!0)},500),()=>{var e;N.current&&k.current&&k.current.removeControl(N.current),null===(e=k.current)||void 0===e||e.remove(),k.current=null,j.current=null,z(!1),E(!0)}},[]),(0,o.useEffect)(()=>{if(!C||!k.current)return;let e=k.current;N.current&&e.removeControl(N.current);let t=Object.keys(V).sort();if(t.length>0){let r=new(a()).Control({position:"bottomright"});r.onAdd=()=>{let e=a().DomUtil.create("div","info legend leaflet-control-layers leaflet-control-layers-expanded");e.style.backgroundColor="rgba(250, 250, 249, 0.95)",e.style.backdropFilter="blur(8px)",e.style.padding="12px 16px",e.style.borderRadius="12px",e.style.border="1px solid rgba(231, 229, 228, 0.6)",e.style.boxShadow="0 4px 12px rgba(101, 79, 60, 0.15), 0 2px 6px rgba(101, 79, 60, 0.1)",e.style.maxWidth="200px",e.style.fontFamily="'Inter', system-ui, sans-serif",e.style.marginBottom="80px";let r=a().DomUtil.create("div","",e);r.style.cursor="pointer",r.style.marginBottom=S?"8px":"0",r.style.fontWeight="600",r.style.fontSize="14px",r.style.display="flex",r.style.justifyContent="space-between",r.style.alignItems="center",r.style.color="#57534e",r.style.letterSpacing="0.025em",r.innerHTML='<span>Categories</span><span style="font-size: 1.1em; color: #d97706; transition: transform 0.2s ease;">'.concat(S?"&#9660;":"&#9654;","</span>");let n=a().DomUtil.create("div","",e);if(n.style.maxHeight="160px",n.style.overflowY="auto",n.style.display=S?"block":"none",n.style.scrollbarWidth="thin",a().DomEvent.disableClickPropagation(e),a().DomEvent.disableScrollPropagation(e),r.onclick=e=>{e.stopPropagation(),L(!S)},S){let e="";t.forEach(t=>{var r;let n=(null===(r=V[t])||void 0===r?void 0:r.color)||v;e+='<div style="display: flex; align-items: center; margin-bottom: 6px; padding: 4px 0; transition: background-color 0.2s ease; border-radius: 6px;" onmouseover="this.style.backgroundColor=\'rgba(245, 245, 244, 0.5)\'" onmouseout="this.style.backgroundColor=\'transparent\'">\n              <span style="background-color: '.concat(n,'; width: 12px; height: 12px; border-radius: 50%; display: inline-block; margin-right: 8px; border: 2px solid #fef3c7; flex-shrink: 0; box-shadow: 0 2px 4px rgba(101, 79, 60, 0.2);"></span>\n              <span style="font-size: 12px; word-break: break-word; color: #44403c; font-weight: 500;">').concat(t,"</span>\n            </div>")}),n.innerHTML=e}return e},r.addTo(e),N.current=r}},[V,C,S,L]),(0,o.useEffect)(()=>{if(!C||!k.current||!j.current)return;let e=k.current,n=j.current;n.clearLayers(),D.current={};let o=[];if(t.forEach(e=>{let t=e.id===r,n=V[e.category],i=y((null==n?void 0:n.color)||v,t),l=a().marker([e.latitude,e.longitude],{icon:i});l.on("click",()=>s(e.id)),l.bindPopup('\n      <div style="font-family: \'Inter\', system-ui, sans-serif; font-size: 14px; max-width: 280px; color: #44403c;">\n        <div style="margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid #e7e5e4;">\n          <strong style="display: block; margin-bottom: 4px; font-size: 16px; color: #1c1917; font-weight: 600; line-height: 1.3;">'.concat(e.originalName,'</strong>\n        </div>\n        <div style="space-y: 6px;">\n          <div style="margin-bottom: 6px;">\n            <strong style="color: #78716c; font-size: 12px; text-transform: uppercase; letter-spacing: 0.05em; font-weight: 600;">Category:</strong>\n            <span style="margin-left: 6px; color: #57534e; font-weight: 500;">').concat(e.category,'</span>\n          </div>\n          <div style="margin-bottom: 6px;">\n            <strong style="color: #78716c; font-size: 12px; text-transform: uppercase; letter-spacing: 0.05em; font-weight: 600;">Original:</strong>\n            <span style="margin-left: 6px; color: #57534e; font-family: \'Source Code Pro\', monospace; font-size: 13px; background: #f5f5f4; padding: 2px 4px; border-radius: 3px;">').concat(e.originalCoords,'</span>\n          </div>\n          <div style="margin-bottom: 0;">\n            <strong style="color: #78716c; font-size: 12px; text-transform: uppercase; letter-spacing: 0.05em; font-weight: 600;">Coordinates:</strong>\n            <span style="margin-left: 6px; color: #57534e; font-family: \'Source Code Pro\', monospace; font-size: 13px; background: #f5f5f4; padding: 2px 4px; border-radius: 3px;">').concat(e.latitude.toFixed(4),", ").concat(e.longitude.toFixed(4),"</span>\n          </div>\n        </div>\n      </div>\n    ")),l.bindTooltip("".concat(e.originalName," (").concat(e.category,")"),{direction:"top",offset:[0,-10],className:"cartographic-tooltip",opacity:.95}),D.current[e.id]=l,o.push(l)}),o.length>0){if(n.addLayers(o),t.length>0&&(!e.getBounds().contains(n.getBounds())||3>e.getZoom()))try{let t=n.getBounds();t.isValid()&&e.fitBounds(t,{padding:[40,40],maxZoom:16})}catch(e){}}else e.setView([20,0],2)},[t,C,s,r,V]),(0,o.useEffect)(()=>{if(!C||!k.current)return;if(!r){k.current.closePopup();return}let e=D.current[r],n=k.current;if(e){var o;let s=e.getLatLng(),a=V[e.options.title||(null===(o=t.find(e=>e.id===r))||void 0===o?void 0:o.category)||"Unknown"],i=(null==a?void 0:a.color)||v;e.setIcon(y(i,!0)),j.current?j.current.zoomToShowLayer(e,()=>{n.setView(s,16),e.isPopupOpen()||e.openPopup()}):(n.setView(s,16),e.isPopupOpen()||e.openPopup())}Object.values(D.current).forEach(r=>{if(r!==e){let e=t.find(e=>D.current[e.id]===r);if(e){var n;let t=V[e.category],o=(null==t?void 0:t.color)||v;r.options.icon&&(null===(n=r.options.icon.options.className)||void 0===n?void 0:n.includes("selected-marker-icon"))&&r.setIcon(y(o,!1))}}})},[r,C,V,t]),(0,n.jsxs)("div",{className:"relative w-full h-full",children:[A&&(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-stone-100 via-amber-50 to-stone-100 z-[1050] flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center space-y-6",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(i.A,{className:"h-16 w-16 text-amber-600 mx-auto animate-pulse"}),(0,n.jsx)(l.A,{className:"absolute inset-0 h-16 w-16 text-amber-500 animate-spin"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h3",{className:"text-xl font-serif font-semibold text-stone-800 tracking-wide",children:"Initializing Cartographic View"}),(0,n.jsx)("p",{className:"text-sm text-stone-600 font-medium",children:"Loading geographic visualization system..."})]})]})}),(0,n.jsx)("div",{ref:w,className:"w-full h-full"}),C&&!A&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"absolute top-4 left-4 z-[1040] flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"bg-stone-50/95 backdrop-blur-sm rounded-xl cartographic-shadow px-4 py-3 border border-stone-200/60",children:(0,n.jsxs)("div",{className:"flex items-center space-x-6 text-sm",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(c.A,{className:"h-4 w-4 text-amber-700"}),(0,n.jsx)("span",{className:"font-semibold text-stone-700",children:M.visiblePoints}),(0,n.jsx)("span",{className:"text-stone-500 font-medium",children:"points"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(d.A,{className:"h-4 w-4 text-amber-700"}),(0,n.jsx)("span",{className:"font-semibold text-stone-700",children:M.categories}),(0,n.jsx)("span",{className:"text-stone-500 font-medium",children:"categories"})]})]})}),(0,n.jsx)("div",{className:"bg-stone-50/95 backdrop-blur-sm rounded-xl cartographic-shadow border border-stone-200/60 overflow-hidden",children:(0,n.jsx)("div",{className:"flex",children:Object.entries(h).map(e=>{let[t,r]=e;return(0,n.jsx)("button",{onClick:()=>_(t),className:"px-4 py-3 text-xs font-semibold transition-all duration-200 ".concat(O===t?"bg-amber-600 text-amber-50 shadow-sm":"text-stone-600 hover:text-stone-800 hover:bg-stone-100/60"),title:"Switch to ".concat(r.name),children:r.name},t)})})})]}),(0,n.jsxs)("div",{className:"absolute top-4 right-4 z-[1040] flex flex-col space-y-3",children:[(0,n.jsx)("div",{className:"bg-stone-50/95 backdrop-blur-sm rounded-xl cartographic-shadow border border-stone-200/60 overflow-hidden",children:(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("button",{onClick:U,className:"p-3 text-stone-600 hover:text-stone-800 hover:bg-stone-100/60 transition-all duration-200 border-b border-stone-200/60",title:"Zoom In",children:(0,n.jsx)(u.A,{className:"h-4 w-4"})}),(0,n.jsx)("button",{onClick:Z,className:"p-3 text-stone-600 hover:text-stone-800 hover:bg-stone-100/60 transition-all duration-200 border-b border-stone-200/60",title:"Zoom Out",children:(0,n.jsx)(p.A,{className:"h-4 w-4"})}),(0,n.jsx)("button",{onClick:F,className:"p-3 text-stone-600 hover:text-stone-800 hover:bg-stone-100/60 transition-all duration-200",title:"Reset View",children:(0,n.jsx)(m.A,{className:"h-4 w-4"})})]})}),(0,n.jsx)("div",{className:"bg-stone-50/95 backdrop-blur-sm rounded-xl cartographic-shadow border border-stone-200/60 overflow-hidden",children:(0,n.jsx)("button",{onClick:H,className:"p-3 transition-all duration-200 ".concat(P?"text-amber-700 bg-amber-100/60":"text-stone-600 hover:text-stone-800 hover:bg-stone-100/60"),title:P?"Disable Clustering":"Enable Clustering",children:P?(0,n.jsx)(x.A,{className:"h-4 w-4"}):(0,n.jsx)(f.A,{className:"h-4 w-4"})})})]}),t.length>0&&(0,n.jsx)("div",{className:"absolute bottom-4 left-4 right-4 z-[1040]",children:(0,n.jsx)("div",{className:"bg-stone-50/95 backdrop-blur-sm rounded-xl cartographic-shadow px-6 py-3 border border-stone-200/60",children:(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(b.A,{className:"h-4 w-4 text-amber-700"}),(0,n.jsxs)("span",{className:"text-stone-700 font-medium",children:[h[O].name," ","View"]})]}),(0,n.jsx)("div",{className:"h-4 w-px bg-stone-300/80"}),(0,n.jsxs)("div",{className:"text-stone-600 font-medium",children:[P?"Clustered":"Individual"," markers"]})]}),(0,n.jsx)("div",{className:"text-stone-500 font-medium",children:"Click markers for details â€¢ Drag to explore"})]})})}),0===t.length&&!A&&(0,n.jsx)("div",{className:"absolute inset-0 bg-stone-100/60 z-[1030] flex items-center justify-center",children:(0,n.jsxs)("div",{className:"bg-stone-50/95 backdrop-blur-sm p-10 rounded-2xl cartographic-shadow text-center space-y-6 max-w-md mx-4 border border-stone-200/60",children:[(0,n.jsx)("div",{className:"p-4 bg-amber-100/60 rounded-2xl w-fit mx-auto",children:(0,n.jsx)(c.A,{className:"h-10 w-10 text-amber-700"})}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("h3",{className:"text-xl font-serif font-semibold text-stone-800 tracking-wide",children:"No Geographic Data"}),(0,n.jsx)("p",{className:"text-sm text-stone-600 font-medium leading-relaxed",children:"Add coordinate data to visualize locations on this cartographic interface."})]})]})})]})]})})}}]);